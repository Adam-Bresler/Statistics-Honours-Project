final_data <- last_game(players$players)
source('~/GitHub/Statistics-Honours-Project/r Script.R')
final_data <- last_game(players$players)
View(final_data)
players$players
final_data <- last_game("Roger Federer")
final_data <- last_game( c("Roger Federer", "Rafael Nadal"))
View(final_data)
final_data <- last_game("Roger Federer")
View(final_data)
final_data <- data <- matrix(0, nrow = n, ncol = 33)
for(i in 1:length(players$players)){
work <- last_game(players$players[i])
final_data <- rbind(final_data, work)
}
View(final_data)
final_data <- data <- matrix(0, nrow = 1, ncol = 33)
for(i in 1:length(players$players)){
work <- last_game(players$players[i])
final_data <- rbind(final_data, work)
}
final_data <-  matrix(0, nrow = n, ncol = 33)
for(i in 1:length(players$players)){
work <- last_game(players$players[i])
final_data <- rbind(final_data, work)
}
final_data <-  matrix(0, nrow = n, ncol = 33)
final_data <-  matrix(0, nrow = 1, ncol = 33)
for(i in 1:length(players$players)){
work <- last_game(players$players[i])
final_data <- rbind(final_data, work)
}
final_data <-  matrix(0, nrow = 52670, ncol = 33)
for(i in 1:length(players$players)){
work <- last_game(players$players[i])
final_data <- rbind(final_data, work)
}
View(final_data)
final_data <- data <- matrix(0, nrow = n, ncol = 33)
final_data <- as.data.frame(matrix(0, nrow = 1, ncol = 33))
for(i in 1:length(players$players)){
work <- last_game(players$players[i])
final_data <- rbind(final_data, work)
}
debugSource('~/GitHub/Statistics-Honours-Project/r Script.R')
View(work)
View(data)
final_data <- as.data.frame(matrix(0, nrow = 1, ncol = 33), colnames = colnames(last_game("Roger Federer")))
View(final_data)
final_data <- as.data.frame(matrix(0, nrow = 1, ncol = 33), colnames = colnames(last_game("Roger Federer")))
colnames(last_game("Roger Federer"))
final_data <- as.data.frame(matrix(0, nrow = 1, ncol = 33), colnames = colnames(last_game("Roger Federer")))
View(final_data)
View(final_data)
colnames(final_data) <- colnames(last_game("Roger Federer"))
View(final_data)
for(i in 1:length(players$players)){
work <- last_game(players$players[i])
final_data <- rbind(final_data, work)
}
View(final_data)
final_data <- final_data[-1, ]
View(final_data)
write.csv(players, file = "C:/Users/Adam Bresler/Documents/2020/Honours/Project/Data/csv/Working/finaldata.csv")
write.csv(players, file = "C:/Users/Adam Bresler/Documents/2020/Honours/Project/Data/Working/finaldata.csv")
write.csv(final_data, file = "C:/Users/Adam Bresler/Documents/2020/Honours/Project/Data/Working/finaldata.csv")
View(players)
final_data <- final_data[, c(28,33,1:27, 28:32)]
final_data <- final_data[, c(28,33,1:27, 29:32)]
View(final_data)
final_data <- read.csv("finaldata.csv", header = TRUE)
final_data <- read.csv("finaldata.csv", header = TRUE)
View(final_data)
final_data <- final_data[-1, ]
View(final_data)
final_data <- read.csv("finaldata.csv", header = TRUE)
final_data <- final_data[,-1]
View(final_data)
final_data <- final_data[, c(28, 33, 1:27, 29:32)]
View(final_data)
write.csv(final_data, file = "C:/Users/Adam Bresler/Documents/2020/Honours/Project/Data/Working/finaldata.csv")
final_data <- read.csv("finaldata.csv", header = TRUE)
View(final_data)
View(match)
colnames(match)
last_game <- function(player, n = NA){
ind <- which(match$winner_name == player | match$loser_name == player)
if(is.na(n)){
n = length(ind)
}
else{
n = n
}
ind <- ind[1:n]
match_n <- match[ind, ]
data <- matrix(0, nrow = n, ncol = 36)
winner <- grep("winner", colnames(match))
loser <- grep("loser", colnames(match))
colnames(data) <- c("duration", substring(colnames(match[winner]), 8), "wl", "tourney_id", "start_date", "Match_order")
for (i in 1:n) {
if(match_n$winner_name[i] == player){
data[i,1:32] <- t(as.vector(match_n[i, c(3, winner)]))
data[i, 33] <- 'winner'
data[i, 34] <- match_n[i, 56]
data[i, 35] <- match_n[i, 57]
data[i, 36] <- match_n[i, 62]
}
else{
data[i,1:32] <- t(as.vector(match_n[i, c(3, loser)]))
data[i, 33] <- 'loser'
data[i, 34] <- match_n[i, 56]
data[i, 35] <- match_n[i, 57]
data[i, 36] <- match_n[i, 62]
}
}
data <- as.data.frame(data)
cols <- c(1:27, 29:32)
data[, cols] <- sapply(data[, cols], as.numeric)
return(data)
}
t <- last_game("Roger Federer")
View(t)
View(match)
last_game <- function(player, n = NA){
ind <- which(match$winner_name == player | match$loser_name == player)
if(is.na(n)){
n = length(ind)
}
else{
n = n
}
ind <- ind[1:n]
match_n <- match[ind, ]
data <- matrix(0, nrow = n, ncol = 36)
winner <- grep("winner", colnames(match))
loser <- grep("loser", colnames(match))
colnames(data) <- c("duration", substring(colnames(match[winner]), 8), "wl", "tourney_id", "start_date", "Match_order")
for (i in 1:n) {
if(match_n$winner_name[i] == player){
data[i,1:32] <- t(as.vector(match_n[i, c(3, winner)]))
data[i, 33] <- 'winner'
data[i, 34] <- match_n[i, 56]
data[i, 35] <- match_n[i, 57]
data[i, 36] <- match_n[i, 62]
}
else{
data[i,1:32] <- t(as.vector(match_n[i, c(3, loser)]))
data[i, 33] <- 'loser'
data[i, 34] <- match_n[i, 56]
data[i, 35] <- match_n[i, 57]
data[i, 36] <- match_n[i, 62]
}
}
data <- as.data.frame(data)
cols <- c(1:27, 29:32)
data[, cols] <- sapply(data[, cols], as.numeric)
return(data)
}
t <- last_game("Roger Federer")
View(t)
View(tourney_stats_2010_2019)
last_game <- function(player, n = NA){
ind <- which(match$winner_name == player | match$loser_name == player)
if(is.na(n)){
n = length(ind)
}
else{
n = n
}
ind <- ind[1:n]
match_n <- match[ind, ]
data <- matrix(0, nrow = n, ncol = 35)
winner <- grep("winner", colnames(match))
loser <- grep("loser", colnames(match))
colnames(data) <- c("duration", substring(colnames(match[winner]), 8), "wl", "tourney_id", "Match_order")
for (i in 1:n) {
if(match_n$winner_name[i] == player){
data[i,1:32] <- t(as.vector(match_n[i, c(3, winner)]))
data[i, 33] <- 'winner'
data[i, 34] <- match_n[i, 56]
data[i, 36] <- match_n[i, 62]
}
else{
data[i,1:32] <- t(as.vector(match_n[i, c(3, loser)]))
data[i, 33] <- 'loser'
data[i, 34] <- match_n[i, 56]
data[i, 36] <- match_n[i, 62]
}
}
data <- as.data.frame(data)
cols <- c(1:27, 29:32)
data[, cols] <- sapply(data[, cols], as.numeric)
return(data)
}
t <- last_game("Roger Federer")
last_game <- function(player, n = NA){
ind <- which(match$winner_name == player | match$loser_name == player)
if(is.na(n)){
n = length(ind)
}
else{
n = n
}
ind <- ind[1:n]
match_n <- match[ind, ]
data <- matrix(0, nrow = n, ncol = 35)
winner <- grep("winner", colnames(match))
loser <- grep("loser", colnames(match))
colnames(data) <- c("duration", substring(colnames(match[winner]), 8), "wl", "tourney_id", "Match_order")
for (i in 1:n) {
if(match_n$winner_name[i] == player){
data[i,1:32] <- t(as.vector(match_n[i, c(3, winner)]))
data[i, 33] <- 'winner'
data[i, 34] <- match_n[i, 56]
data[i, 35] <- match_n[i, 62]
}
else{
data[i,1:32] <- t(as.vector(match_n[i, c(3, loser)]))
data[i, 33] <- 'loser'
data[i, 34] <- match_n[i, 56]
data[i, 35] <- match_n[i, 62]
}
}
data <- as.data.frame(data)
cols <- c(1:27, 29:32)
data[, cols] <- sapply(data[, cols], as.numeric)
return(data)
}
t <- last_game("Roger Federer")
View(t)
final_data <- as.data.frame(matrix(0, nrow = 1, ncol = 33))
colnames(final_data) <- colnames(last_game("Roger Federer"))
for(i in 1:length(players$players)){
work <- last_game(players$players[i])
final_data <- rbind(final_data, work)
}
final_data <- final_data[, c(28, 33, 1:27, 29:32)]
write.csv(final_data, file = "C:/Users/Adam Bresler/Documents/2020/Honours/Project/Data/Working/finaldata.csv")
last_game <- function(player, n = NA){
ind <- which(match$winner_name == player | match$loser_name == player)
if(is.na(n)){
n = length(ind)
}
else{
n = n
}
ind <- ind[1:n]
match_n <- match[ind, ]
data <- matrix(0, nrow = n, ncol = 35)
winner <- grep("winner", colnames(match))
loser <- grep("loser", colnames(match))
colnames(data) <- c("duration", substring(colnames(match[winner]), 8), "wl", "tourney_id", "Match_order")
for (i in 1:n) {
if(match_n$winner_name[i] == player){
data[i,1:32] <- t(as.vector(match_n[i, c(3, winner)]))
data[i, 33] <- 'winner'
data[i, 34] <- match_n[i, 56]
data[i, 35] <- match_n[i, 62]
}
else{
data[i,1:32] <- t(as.vector(match_n[i, c(3, loser)]))
data[i, 33] <- 'loser'
data[i, 34] <- match_n[i, 56]
data[i, 35] <- match_n[i, 62]
}
}
data <- as.data.frame(data)
cols <- c(1:27, 29:32)
data[, cols] <- sapply(data[, cols], as.numeric)
return(data)
}
t <- last_game("Roger Federer")
final_data <- as.data.frame(matrix(0, nrow = 1, ncol = 33))
colnames(final_data) <- colnames(last_game("Roger Federer"))
final_data <- as.data.frame(matrix(0, nrow = 1, ncol = 35))
colnames(final_data) <- colnames(last_game("Roger Federer"))
for(i in 1:length(players$players)){
work <- last_game(players$players[i])
final_data <- rbind(final_data, work)
}
final_data <- final_data[-1, ]
final_data <- final_data[, c(28, 33, 1:27, 29:32)]
final_data <- final_data[-1, ]
final_data <- as.data.frame(matrix(0, nrow = 1, ncol = 35))
colnames(final_data) <- colnames(last_game("Roger Federer"))
for(i in 1:length(players$players)){
work <- last_game(players$players[i])
final_data <- rbind(final_data, work)
}
final_data <- final_data[, c(28, 33, 1:27, 29:32)]
final_data <- as.data.frame(matrix(0, nrow = 1, ncol = 35))
colnames(final_data) <- colnames(last_game("Roger Federer"))
for(i in 1:length(players$players)){
work <- last_game(players$players[i])
final_data <- rbind(final_data, work)
}
write.csv(final_data, file = "C:/Users/Adam Bresler/Documents/2020/Honours/Project/Data/Working/finaldata.csv")
final_data <- final_data[, c(28, 33, 1:27, 29:32, 34:35)]
final_data <- final_data[-1, ]
View(final_data)
write.csv(final_data, file = "C:/Users/Adam Bresler/Documents/2020/Honours/Project/Data/Working/finaldata.csv")
final_data <- read.csv("finaldata.csv", header = TRUE)
final_data <- final_data[, -1]
View(final_data)
View(final_data)
setwd("~/GitHub/Statistics-Honours-Project/Data")
final_data <- read.csv("finaldata.csv", header = TRUE)
View(final_data)
final_data <- final_data[, -1]
final_data[,41:70] <- numeric(0)
for(i in 41:70){
final_data[,i] <- NA
}
View(final_data)
for(i in 41:71){
final_data[,i] <- NA
}
colnames(final_data[,i])
colnames(final_data[2])
View(final_data)
colnames(final_data[i-39])
colnames(final_data[i-38])
for(i in 41:71){
final_data[,i] <- NA
colnames(final_data[i]) <- grep("average",colnames(final_data[i-38]))
}
for(i in 41:71){
final_data[,i] <- NA
colnames(final_data[i]) <- grep("average",colnames(final_data[i-38]))
}
View(final_data)
colnames(final_data[i])
grep("average", colnames(final_data[i-38]))
colnames(final_data[i]) <- pasate("average", colnames(final_data[i-38]), sep="_")
for(i in 41:71){
final_data[,i] <- NA
colnames(final_data[i]) <- paste("average", colnames(final_data[i-38]), sep="_")
}
View(final_data)
colnames(final_data[i-38])
paste("average", colnames(final_data[i-38]), sep="_")
colnames(final_data[i])
colnames(final_data[i]) <- paste("average", colnames(final_data[i-38]), sep="_")
colnames(final_data[i-38])
colnames(final_data[i])
final_data[i]
colnames(final_data[,i]) <- paste("average", colnames(final_data[i-38]), sep="_")
for(i in 41:71){
final_data[,i] <- NA
colnames(final_data[,i]) <- paste("average", colnames(final_data[i-38]), sep="_")
}
for(i in 41:71){
final_data[,i] <- NA
colnames(final_data[i]) <- paste("average", colnames(final_data[i-38]), sep="_")
}
View(final_data)
paste("average", colnames(final_data[i-38]), sep="_")
colnames(final_data[i])
colnames(final_data[i]) <- paste("average", colnames(final_data[i-38]), sep="_")
colnames(final_data[i])
paste("average", colnames(final_data[i-38]), sep="_")
colnames(final_data[i])
paste("average", colnames(final_data[3:33]), sep="_")
colnames(final_data[41:71])
colnames(final_data[41:71]) <- paste("average", colnames(final_data[3:33]), sep="_")
View(final_data)
names <- paste("average", colnames(final_data[3:33]), sep="_")
names
colnames(final_data[41:71]) <- names
View(final_data)
source('~/GitHub/Statistics-Honours-Project/r Script.R')
names <- paste("average", colnames(final_data[3:33]), sep="_")
colnames(final_data[41:71]) <- names
names <- paste("average", colnames(final_data[3:33]), sep="_")
colnames(final_data[41:71]) <- names
View(final_data)
names <- paste("average", colnames(final_data[3:33]), sep="_")
colnames(final_data[41:71]) <- names
View(final_data)
# Summing all previous data --------------------------------------------------
library(stringr)
for(i in 41:72){
final_data[,i] <- NA
}
#38 before
name_last <- NULL
for(i in 1:nrow(final_data)){
if(name_last == final_data$name){
final_data[i, 72] <- final_data[i - 1, 72] + 1
final_data[i, 41:71] <- (final_data[i-1, 41:71]*final_data[i - 1, 72] + final_data[i, 3:33])/final_data[i, 72]
}
else{
final_data[i, 41:71] <- final_data[i, 3:33]
final_data[i, 72] <- 1
}
name_last <- final_data$name[i]
}
for(i in 1:nrow(final_data)){
if(name_last == final_data$name[i]){
final_data[i, 72] <- final_data[i - 1, 72] + 1
final_data[i, 41:71] <- (final_data[i-1, 41:71]*final_data[i - 1, 72] + final_data[i, 3:33])/final_data[i, 72]
}
else{
final_data[i, 41:71] <- final_data[i, 3:33]
final_data[i, 72] <- 1
}
name_last <- final_data$name[i]
}
final_data$name[i]
name_last
name_last == final_data$name[i]
#38 before
name_last <- "NULL"
name_last == final_data$name[i]
#38 before
name_last <- "NULL"
for(i in 1:nrow(final_data)){
if(name_last == final_data$name[i]){
final_data[i, 72] <- final_data[i - 1, 72] + 1
final_data[i, 41:71] <- (final_data[i-1, 41:71]*final_data[i - 1, 72] + final_data[i, 3:33])/final_data[i, 72]
}
else{
final_data[i, 41:71] <- final_data[i, 3:33]
final_data[i, 72] <- 1
}
name_last <- final_data$name[i]
}
View(final_data)
names <- c(paste("average", colnames(final_data[3:33]), sep="_"), "num_games")
colnames(final_data[41:71]) <- names
names <- c(paste("average", colnames(final_data[3:33]), sep="_"), "num_games")
names
names <- c(paste("average", colnames(final_data[3:33]), sep="_"), "num_games")
colnames(final_data[41:72]) <- names
View(final_data)
colnames(final_data[41:72])
# Summing all previous data --------------------------------------------------
library(stringr)
for(i in 41:72){
final_data[,i] <- NA
}
#38 before
name_last <- "NULL"
for(i in 1:nrow(final_data)){
if(name_last == final_data$name[i]){
final_data[i, 72] <- final_data[i - 1, 72] + 1
final_data[i, 41:71] <- (final_data[i-1, 41:71]*final_data[i - 1, 72] + final_data[i, 3:33])/final_data[i, 72]
}
else{
final_data[i, 41:71] <- final_data[i, 3:33]
final_data[i, 72] <- 1
}
name_last <- final_data$name[i]
}
View(final_data)
names <- c(paste("average", colnames(final_data[3:33]), sep="_"), "num_games")
for (i in 41:72) {
colnames(final_data[i]) <- names[i-40]
}
View(final_data)
names[i-40]
final_data[i]
colnames(final_data[i])
colnames(final_data[i]) <- names[i-40]
colnames(final_data[i])
for (i in 41:72) {
names(final_data[i]) <- names[i-40]
}
View(final_data)
names(final_data[i])
names(final_data[i]) <- names[i-40]
names(final_data[i])
str(names)
str(final_data)
colnames(final_data)[i]
for (i in 41:72) {
colnames(final_data)[i] <- names[i-40]
}
source('~/GitHub/Statistics-Honours-Project/r Script.R')
write.csv(final_data, file = "C:/Users/Adam Bresler/Documents/GitHub/Statistics-Honours-Project/Data/finaldata.csv")
View(t)
# Read in final data ---------------------------------------------------------
final_data <- read.csv("finaldata.csv", header = TRUE)
final_data <- final_data[,-1]
View(final_data)
names <- c(paste("average", colnames(final_data[3:33]), sep="_"), "num_games")
for (i in 41:72) {
colnames(final_data)[i] <- names[i-40]
}
write.csv(final_data, file = "C:/Users/Adam Bresler/Documents/GitHub/Statistics-Honours-Project/Data/finaldata.csv")
View(final_data)
# Read in final data ---------------------------------------------------------
final_data <- read.csv("finaldata.csv", header = TRUE)
final_data <- final_data[,-1]
View(final_data)
View(final_data)
for(i in 41:72){
final_data[,i] <- NA
}
#38 before
name_last <- "NULL"
for(i in 1:nrow(final_data)){
if(name_last == final_data$name[i]){
final_data[i, 72] <- final_data[i - 1, 72] + 1
final_data[i, 41:71] <- (final_data[i-1, 41:71]*final_data[i - 1, 72] + final_data[i, 3:33])/final_data[i, 72]
}
else{
final_data[i, 41:71] <- final_data[i, 3:33]
final_data[i, 72] <- 1
}
name_last <- final_data$name[i]
}
